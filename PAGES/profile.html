<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - TravelHub</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="../index.html">
                    <span class="logo-icon">‚úà</span>
                    <span class="logo-text">TravelHub</span>
                </a>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="../index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="weather.html" class="nav-link">–ü–æ–≥–æ–¥–∞</a></li>
                <li><a href="attractions.html" class="nav-link">–ú–µ—Å—Ç–∞</a></li>
                <li><a href="routes.html" class="nav-link">–ú–∞—Ä—à—Ä—É—Ç—ã</a></li>
                <li><a href="planner.html" class="nav-link">–ü–ª–∞–Ω</a></li>
                <li><a href="forum.html" class="nav-link">–§–æ—Ä—É–º</a></li>
                <li><a href="about.html" class="nav-link">–û –Ω–∞—Å</a></li>
                <li><a href="profile.html" class="nav-link active">üë§</a></li>
            </ul>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </nav>
    </header>

    <main class="main-content profile-page">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
                <p class="page-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</p>
            </div>

            <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
            <div id="profileLoading" class="loading-state" style="display: none;">
                <div class="loading-spinner"></div>
                <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å...</p>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
            <div id="profileError" class="error-state" style="display: none;">
                <div class="error-icon">‚ö†Ô∏è</div>
                <p class="error-message"></p>
                <a href="auth.html" class="btn btn-primary">–í–æ–π—Ç–∏</a>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <section id="profileContent" class="profile-content" style="display: none;">
                <div class="profile-grid">
                    <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
                    <div class="profile-card">
                        <h2 class="section-subtitle">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è</h2>
                        
                        <div class="profile-avatar-section">
                            <div class="avatar-container">
                                <img 
                                    id="userAvatar" 
                                    src="../uploads/avatars/default-avatar.png" 
                                    alt="–ê–≤–∞—Ç–∞—Ä" 
                                    class="user-avatar"
                                    onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23FF6B35%22 width=%22200%22 height=%22200%22/%3E%3Ctext x=%2250%25%22 y=%2250%25%22 dominant-baseline=%22middle%22 text-anchor=%22middle%22 font-size=%2280%22 fill=%22white%22%3Eüë§%3C/text%3E%3C/svg%3E'"
                                >
                                <button class="avatar-upload-btn" id="changeAvatarBtn">
                                    üì∑ –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ
                                </button>
                                <input 
                                    type="file" 
                                    id="avatarInput" 
                                    accept="image/*" 
                                    style="display: none;"
                                >
                            </div>
                        </div>

                        <div class="profile-info">
                            <div class="info-item">
                                <label>–ò–º—è:</label>
                                <div class="info-value">
                                    <span id="displayName">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                    <button class="btn-edit" id="editNameBtn">‚úèÔ∏è</button>
                                </div>
                            </div>

                            <div class="info-item">
                                <label>Email:</label>
                                <div class="info-value">
                                    <span id="displayEmail">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                </div>
                            </div>

                            <div class="info-item">
                                <label>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                                <div class="info-value">
                                    <span id="displayDate">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                </div>
                            </div>
                        </div>

                        <div class="profile-actions">
                            <button class="btn btn-danger" id="logoutBtn">
                                üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞
                            </button>
                        </div>
                    </div>

                    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                    <div class="profile-stats-card">
                        <h2 class="section-subtitle">–í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üìÖ</div>
                                <div class="stat-data">
                                    <span class="stat-value" id="statTrips">0</span>
                                    <span class="stat-label">–ü–æ–µ–∑–¥–æ–∫</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üó∫Ô∏è</div>
                                <div class="stat-data">
                                    <span class="stat-value" id="statRoutes">0</span>
                                    <span class="stat-label">–ú–∞—Ä—à—Ä—É—Ç–æ–≤</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üí¨</div>
                                <div class="stat-data">
                                    <span class="stat-value" id="statPosts">0</span>
                                    <span class="stat-label">–ü–æ—Å—Ç–æ–≤</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚≠ê</div>
                                <div class="stat-data">
                                    <span class="stat-value" id="statFavorites">0</span>
                                    <span class="stat-label">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                    <div class="profile-settings-card">
                        <h2 class="section-subtitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                        
                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>–Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</h4>
                                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —è–∑—ã–∫</p>
                                </div>
                                <select id="languageSelect" class="setting-select">
                                    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                                    <option value="en">English</option>
                                    <option value="kk">“ö–∞–∑–∞“õ—à–∞</option>
                                </select>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
                                    <p>–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="notificationsToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>–ü—É–±–ª–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h4>
                                    <p>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="publicProfileToggle" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <button class="btn btn-primary" id="saveSettingsBtn">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>

                    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏ -->
                    <div class="profile-recent-card">
                        <h2 class="section-subtitle">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–µ–∑–¥–∫–∏</h2>
                        <div id="recentTrips" class="recent-trips-list">
                            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
                        </div>
                        <a href="planner.html" class="btn btn-outline">–í—Å–µ –ø–æ–µ–∑–¥–∫–∏ ‚Üí</a>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏ -->
    <div id="editNameModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-small">
            <button class="modal-close" id="closeNameModal">&times;</button>
            <div class="modal-body">
                <h2 class="modal-title">–ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</h2>
                <form id="editNameForm">
                    <div class="form-group">
                        <label for="newName">–ù–æ–≤–æ–µ –∏–º—è</label>
                        <input 
                            type="text" 
                            id="newName" 
                            class="form-input" 
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è"
                            required
                            minlength="2"
                        >
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button type="button" class="btn btn-outline" id="cancelNameEdit">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="logo">
                        <span class="logo-icon">‚úà</span>
                        <span class="logo-text">TravelHub</span>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 TravelHub</p>
            </div>
        </div>
    </footer>

    <script src="../js/storage.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/profile.js"></script>
</body>
</html>